<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>100 Dias Survival</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="manifest.json">

<style>
body {
  margin: 0;
  background: #0b0b0b;
  color: #e0e0e0;
  font-family: Arial, sans-serif;
}
button {
  background: #222;
  color: #fff;
  border: 1px solid #555;
  padding: 8px 12px;
  cursor: pointer;
}
button:hover { background: #333; }
.hidden { display: none; }

#topBar {
  display: flex;
  justify-content: space-between;
  padding: 6px 10px;
  background: #111;
}
#stats { display: flex; gap: 10px; }

#messages {
  height: 200px;
  overflow-y: auto;
  background: #000;
  padding: 8px;
  border-top: 1px solid #333;
}

#actions {
  display: flex;
  justify-content: center;
  gap: 10px;
  padding: 10px;
  background: #111;
}

.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.9);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}
.modalContent {
  background: #111;
  border: 1px solid #444;
  padding: 15px;
  max-width: 420px;
  width: 90%;
}

#sideButtons {
  position: fixed;
  right: 10px;
  top: 60px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

#footer {
  position: fixed;
  bottom: 5px;
  right: 10px;
  font-size: 11px;
  opacity: .6;
}
</style>
</head>

<body>

<!-- MENU -->
<div id="menu" class="modal">
  <div class="modalContent">
    <h2>100 Dias Survival</h2>
    <p>Sobreviva. Descubra a verdade.</p>
    <button onclick="goDifficulty()">PLAY</button>
  </div>
</div>

<!-- DIFICULDADE -->
<div id="difficulty" class="modal hidden">
  <div class="modalContent">
    <h3>Dificuldade</h3>
    <button onclick="startGame('easy')">F√°cil</button><br><br>
    <button onclick="startGame('normal')">Normal</button><br><br>
    <button onclick="startGame('hard')">Dif√≠cil</button>
  </div>
</div>

<!-- INVENT√ÅRIO -->
<div id="inventory" class="modal hidden">
  <div class="modalContent">
    <h3>Invent√°rio</h3>
    <div id="inventoryList"></div>
    <button onclick="closeInventory()">Fechar</button>
  </div>
</div>

<!-- CARTAS -->
<div id="cards" class="modal hidden">
  <div class="modalContent">
    <h3>Cartas</h3>
    <div id="cardsList"></div>
    <button onclick="closeCards()">Fechar</button>
  </div>
</div>

<!-- HUD -->
<div id="topBar" class="hidden">
  <div id="stats"></div>
  <div>Dia <span id="day">1</span></div>
</div>

<div id="sideButtons" class="hidden">
  <button onclick="openInventory()">Invent√°rio</button>
  <button onclick="openCards()">Cartas</button>
</div>

<div id="actions" class="hidden">
  <button onclick="explore()">Explorar</button>
  <button onclick="rest()">Descansar</button>
  <button onclick="searchWater()">Buscar √Ågua</button>
</div>

<div id="messages" class="hidden"></div>

<div id="footer">v0.0.2 (beta)</div>

<script>
/* ===== ESTADO ===== */
let day = 1;
let actionsLeft = 3;
let stats = { fome:70, sede:70, energia:70, sanidade:70 };
let inventory = {};
let cards = {};

/* ===== ELEMENTOS ===== */
const msgBox = document.getElementById("messages");
const statsBox = document.getElementById("stats");

/* ===== HIST√ìRIA ===== */
const story = {
  intro: [
    "Voc√™ acorda atordoado.",
    "O mundo est√° silencioso demais.",
    "Nada faz sentido.",
    "A √∫nica certeza: sobreviver 100 dias."
  ],
  10: ["Casas vazias. Portas abertas.", "Algo for√ßou todos a fugir."],
  20: ["Mensagens nas paredes.", "‚ÄòN√£o confie neles.‚Äô"],
  30: ["Um r√°dio transmite ru√≠dos.", "Uma voz pede ajuda."],
  50: ["Seu corpo est√° mudando.", "O cansa√ßo nunca passa."],
  70: ["Voc√™ entende agora.", "Isso foi um experimento."],
  90: ["A verdade est√° pr√≥xima.", "Poucos dias restam."],
  100: ["Voc√™ sobreviveu.", "Mas a hist√≥ria n√£o termina aqui."]
};

/* ===== UTIL ===== */
function log(msg) {
  msgBox.innerHTML += "‚Ä¢ " + msg + "<br>";
  msgBox.scrollTop = msgBox.scrollHeight;
}

function updateUI() {
  statsBox.innerHTML =
    `Fome:${stats.fome} | Sede:${stats.sede} | Energia:${stats.energia} | Sanidade:${stats.sanidade}`;
  document.getElementById("day").textContent = day;
}

function showStory(block) {
  block.forEach(l => log("üìú " + l));
}

/* ===== MENU ===== */
function goDifficulty() {
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("difficulty").classList.remove("hidden");
}

function startGame() {
  document.getElementById("difficulty").classList.add("hidden");
  document.getElementById("topBar").classList.remove("hidden");
  document.getElementById("actions").classList.remove("hidden");
  document.getElementById("messages").classList.remove("hidden");
  document.getElementById("sideButtons").classList.remove("hidden");
  showStory(story.intro);
  updateUI();
}

/* ===== JOGO ===== */
function consumeAction() {
  actionsLeft--;
  stats.fome -= 5;
  stats.sede -= 6;
  stats.energia -= 4;

  if (actionsLeft <= 0) nextDay();
  updateUI();
}

function nextDay() {
  day++;
  actionsLeft = 3;
  if (story[day]) showStory(story[day]);
  log("Um novo dia come√ßa...");
}

function explore() {
  log("Voc√™ explora a √°rea...");
  if (Math.random() < 0.4) addItem("Comida");
  if (Math.random() < 0.2) addCard("Registro Antigo");
  consumeAction();
}

function rest() {
  log("Voc√™ descansa.");
  stats.energia += 10;
  stats.sanidade += 5;
  consumeAction();
}

function searchWater() {
  log("Voc√™ encontra √°gua.");
  stats.sede += 15;
  consumeAction();
}

/* ===== INVENT√ÅRIO ===== */
function addItem(name) {
  inventory[name] = (inventory[name] || 0) + 1;
  log("Item encontrado: " + name);
}
function openInventory() {
  const list = document.getElementById("inventoryList");
  list.innerHTML = "";
  for (let i in inventory) {
    const b = document.createElement("button");
    b.textContent = `${i} x${inventory[i]}`;
    b.onclick = () => useItem(i);
    list.appendChild(b);
  }
  document.getElementById("inventory").classList.remove("hidden");
}
function closeInventory() {
  document.getElementById("inventory").classList.add("hidden");
}
function useItem(item) {
  stats.fome += 20;
  inventory[item]--;
  if (inventory[item] <= 0) delete inventory[item];
  log("Voc√™ usou: " + item);
  closeInventory();
  updateUI();
}

/* ===== CARTAS ===== */
function addCard(name) {
  if (cards[name]) return;
  cards[name] = true;
  log("Voc√™ encontrou uma carta.");
}
function openCards() {
  const list = document.getElementById("cardsList");
  list.innerHTML = "";
  for (let c in cards) {
    const b = document.createElement("button");
    b.textContent = c;
    b.onclick = () => alert("A carta descreve o colapso do mundo.");
    list.appendChild(b);
  }
  document.getElementById("cards").classList.remove("hidden");
}
function closeCards() {
  document.getElementById("cards").classList.add("hidden");
}

/* ===== FOR√áAR ESTADO INICIAL ===== */
window.onload = () => {
  document.getElementById("inventory").classList.add("hidden");
  document.getElementById("cards").classList.add("hidden");
  document.getElementById("difficulty").classList.add("hidden");
  document.getElementById("topBar").classList.add("hidden");
  document.getElementById("actions").classList.add("hidden");
  document.getElementById("messages").classList.add("hidden");
  document.getElementById("sideButtons").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
};
</script>

</body>
</html>
