<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>100 Dias Survival</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="manifest" href="manifest.json">

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0b0b0b;
      color: #e0e0e0;
    }

    button {
      background: #222;
      color: #fff;
      border: 1px solid #555;
      padding: 8px 12px;
      cursor: pointer;
    }

    button:hover {
      background: #333;
    }

    .hidden { display: none; }

    #topBar {
      display: flex;
      justify-content: space-between;
      padding: 6px 10px;
      background: #111;
      font-size: 14px;
    }

    #stats {
      display: flex;
      gap: 10px;
      font-size: 13px;
    }

    #messages {
      height: 180px;
      overflow-y: auto;
      background: #000;
      padding: 8px;
      border-top: 1px solid #333;
      font-size: 14px;
    }

    #actions {
      display: flex;
      gap: 10px;
      padding: 10px;
      justify-content: center;
      background: #111;
    }

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .modalContent {
      background: #111;
      border: 1px solid #444;
      padding: 15px;
      max-width: 420px;
      width: 90%;
    }

    #footer {
      position: fixed;
      bottom: 5px;
      right: 10px;
      font-size: 11px;
      opacity: .6;
    }

    #sideButtons {
      position: fixed;
      right: 10px;
      top: 60px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    #inventoryList button,
    #cardsList button {
      width: 100%;
      margin-bottom: 4px;
      text-align: left;
    }
  </style>
</head>

<body>

<!-- MENU -->
<div id="menu" class="modal">
  <div class="modalContent">
    <h2>100 Dias Survival</h2>
    <p>Sobreviva. Descubra a verdade. Aguente até o fim.</p>
    <button onclick="goDifficulty()">PLAY</button>
  </div>
</div>

<!-- DIFICULDADE -->
<div id="difficulty" class="modal hidden">
  <div class="modalContent">
    <h3>Dificuldade</h3>
    <button onclick="startGame('easy')">Fácil</button><br><br>
    <button onclick="startGame('normal')">Normal</button><br><br>
    <button onclick="startGame('hard')">Difícil</button>
  </div>
</div>

<!-- INVENTÁRIO -->
<div id="inventory" class="modal hidden">
  <div class="modalContent">
    <h3>Inventário</h3>
    <div id="inventoryList"></div>
    <button onclick="closeInventory()">Fechar</button>
  </div>
</div>

<!-- CARTAS -->
<div id="cards" class="modal hidden">
  <div class="modalContent">
    <h3>Cartas</h3>
    <div id="cardsList"></div>
    <button onclick="closeCards()">Fechar</button>
  </div>
</div>

<!-- HUD -->
<div id="topBar" class="hidden">
  <div id="stats"></div>
  <div>
    Dia <span id="day">1</span> |
    Recorde: <span id="record">0</span>
  </div>
</div>

<div id="sideButtons" class="hidden">
  <button onclick="openInventory()">Inventário</button>
  <button onclick="openCards()">Cartas</button>
</div>

<div id="actions" class="hidden">
  <button onclick="actionExplore()">Explorar</button>
  <button onclick="actionRest()">Descansar</button>
  <button onclick="actionSearch()">Procurar Água</button>
</div>

<div id="messages" class="hidden"></div>

<div id="footer">v0.0.2 (beta)</div>

<script>
/* ===== ESTADO ===== */
let day = 1;
let actionsLeft = 3;
let record = localStorage.getItem("record") || 0;

let stats = {
  fome: 70,
  sede: 70,
  energia: 70,
  sanidade: 70
};

let inventory = {};
let cards = {};
let difficulty = "easy";

/* ===== UI ===== */
const msgBox = document.getElementById("messages");
const statsBox = document.getElementById("stats");

function log(msg) {
  msgBox.innerHTML += "• " + msg + "<br>";
  msgBox.scrollTop = msgBox.scrollHeight;
}

function updateUI() {
  statsBox.innerHTML =
    `Fome:${stats.fome} | Sede:${stats.sede} | Energia:${stats.energia} | Sanidade:${stats.sanidade}`;
  document.getElementById("day").textContent = day;
  document.getElementById("record").textContent = record;
}

/* ===== MENU ===== */
function goDifficulty() {
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("difficulty").classList.remove("hidden");
}

function startGame(diff) {
  difficulty = diff;
  document.getElementById("difficulty").classList.add("hidden");

  document.getElementById("topBar").classList.remove("hidden");
  document.getElementById("actions").classList.remove("hidden");
  document.getElementById("messages").classList.remove("hidden");
  document.getElementById("sideButtons").classList.remove("hidden");

  log("Você acorda sem lembrar como chegou aqui.");
  log("Seu único objetivo: sobreviver 100 dias.");

  updateUI();
}

/* ===== AÇÕES ===== */
function consumeDay() {
  actionsLeft--;
  stats.fome -= 5;
  stats.sede -= 6;
  stats.energia -= 4;

  if (actionsLeft <= 0) {
    nextDay();
  }
  updateUI();
}

function nextDay() {
  day++;
  actionsLeft = 3;

  if (day > record) {
    record = day;
    localStorage.setItem("record", record);
  }

  log("Um novo dia começa...");
  randomEvent();
}

function actionExplore() {
  log("Você explora os arredores...");
  if (Math.random() < 0.4) addItem("Comida Enlatada");
  if (Math.random() < 0.2) addCard("Relato Perdido");
  consumeDay();
}

function actionRest() {
  stats.energia += 10;
  stats.sanidade += 5;
  log("Você descansa um pouco.");
  consumeDay();
}

function actionSearch() {
  stats.sede += 15;
  log("Você encontra água potável.");
  consumeDay();
}

/* ===== EVENTOS ===== */
function randomEvent() {
  if (Math.random() < 0.3) {
    log("Você adoeceu durante a noite.");
    stats.energia -= 10;
    stats.sanidade -= 10;
  }
}

/* ===== INVENTÁRIO ===== */
function addItem(name) {
  inventory[name] = (inventory[name] || 0) + 1;
  log("Item encontrado: " + name);
}

function openInventory() {
  const list = document.getElementById("inventoryList");
  list.innerHTML = "";
  for (let i in inventory) {
    const btn = document.createElement("button");
    btn.textContent = `${i} x${inventory[i]}`;
    btn.onclick = () => useItem(i);
    list.appendChild(btn);
  }
  document.getElementById("inventory").classList.remove("hidden");
}

function closeInventory() {
  document.getElementById("inventory").classList.add("hidden");
}

function useItem(item) {
  if (item.includes("Comida")) stats.fome += 20;
  inventory[item]--;
  if (inventory[item] <= 0) delete inventory[item];
  log("Você usou: " + item);
  closeInventory();
  updateUI();
}

/* ===== CARTAS ===== */
function addCard(name) {
  if (cards[name]) return;
  cards[name] = true;
  log("Você encontrou uma carta misteriosa.");
}

function openCards() {
  const list = document.getElementById("cardsList");
  list.innerHTML = "";
  for (let c in cards) {
    const btn = document.createElement("button");
    btn.textContent = c;
    btn.onclick = () => alert("Conteúdo da carta: " + c);
    list.appendChild(btn);
  }
  document.getElementById("cards").classList.remove("hidden");
}

function closeCards() {
  document.getElementById("cards").classList.add("hidden");
}
</script>

</body>
</html>
